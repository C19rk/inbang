{"ast":null,"code":"import{ACCOUNT_ADD_REQUEST,ACCOUNT_ADD_SUCCESS,ACCOUNT_ADD_FAIL,ACCOUNT_UPDATE_REQUEST,ACCOUNT_UPDATE_SUCCESS,ACCOUNT_UPDATE_FAIL,USER_LOGIN_REQUEST,USER_LOGIN_SUCCESS,USER_LOGIN_FAIL,USER_LOGOUT,USER_REGISTER_REQUEST,USER_REGISTER_SUCCESS,USER_REGISTER_FAIL,USER_UPDATE_PROFILE_REQUEST,USER_UPDATE_PROFILE_SUCCESS,USER_UPDATE_PROFILE_FAIL,PAYPAL_PAYMENT_REQUEST,PAYPAL_PAYMENT_SUCCESS,PAYPAL_PAYMENT_FAIL,PAYPAL_CANCEL_SUBSCRIPTION_REQUEST,PAYPAL_CANCEL_SUBSCRIPTION_SUCCESS,PAYPAL_CANCEL_SUBSCRIPTION_FAIL}from\"../constants/userConstants\";import axios from\"axios\";export const login=(username,password)=>async dispatch=>{try{dispatch({type:USER_LOGIN_REQUEST});const config={headers:{\"Content-Type\":\"application/json\"}};const{data}=await axios.post(\"/api/login/\",{username:username,password:password},config);dispatch({type:USER_LOGIN_SUCCESS,payload:data});localStorage.setItem(\"userInfo\",JSON.stringify(data));// Store userInfo in localStorage\n}catch(error){dispatch({type:USER_LOGIN_FAIL,payload:error.response&&error.response.data.message?error.response.data.message:error.message});}};export const logout=()=>async dispatch=>{localStorage.removeItem(\"userInfo\");dispatch({type:USER_LOGOUT});};export const registration=(first_name,last_name,username,email,password)=>async dispatch=>{try{dispatch({type:USER_REGISTER_REQUEST});const config={headers:{\"Content-Type\":\"application/json\"}};const{data}=await axios.post(\"/api/registration/\",{first_name,last_name,username,email,password},config);dispatch({type:USER_REGISTER_SUCCESS,payload:data});}catch(error){dispatch({type:USER_REGISTER_FAIL,payload:error.response&&error.response.data.message?error.response.data.message:error.message});}};export const updateUserSettings=userData=>async(dispatch,getState)=>{try{dispatch({type:USER_UPDATE_PROFILE_REQUEST});const{userLogin:{userInfo}}=getState();const config={headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(userInfo.token)}};const{data}=await axios.patch(\"/api/user-settings/\",userData,config);dispatch({type:USER_UPDATE_PROFILE_SUCCESS,payload:data});// Optionally, update the userInfo in local storage and state\nlocalStorage.setItem(\"userInfo\",JSON.stringify(data));dispatch({type:USER_LOGIN_SUCCESS,payload:data});}catch(error){const message=error.response&&error.response.status===401?\"Old password is incorrect!\":error.response&&error.response.data.message?error.response.data.message:error.message;dispatch({type:USER_UPDATE_PROFILE_FAIL,payload:message});}};","map":{"version":3,"names":["ACCOUNT_ADD_REQUEST","ACCOUNT_ADD_SUCCESS","ACCOUNT_ADD_FAIL","ACCOUNT_UPDATE_REQUEST","ACCOUNT_UPDATE_SUCCESS","ACCOUNT_UPDATE_FAIL","USER_LOGIN_REQUEST","USER_LOGIN_SUCCESS","USER_LOGIN_FAIL","USER_LOGOUT","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_REGISTER_FAIL","USER_UPDATE_PROFILE_REQUEST","USER_UPDATE_PROFILE_SUCCESS","USER_UPDATE_PROFILE_FAIL","PAYPAL_PAYMENT_REQUEST","PAYPAL_PAYMENT_SUCCESS","PAYPAL_PAYMENT_FAIL","PAYPAL_CANCEL_SUBSCRIPTION_REQUEST","PAYPAL_CANCEL_SUBSCRIPTION_SUCCESS","PAYPAL_CANCEL_SUBSCRIPTION_FAIL","axios","login","username","password","dispatch","type","config","headers","data","post","payload","localStorage","setItem","JSON","stringify","error","response","message","logout","removeItem","registration","first_name","last_name","email","updateUserSettings","userData","getState","userLogin","userInfo","Authorization","concat","token","patch","status"],"sources":["C:/Users/Administrator/Desktop/VSCode/In-Bang Website Project/react_app/src/actions/userActions.jsx"],"sourcesContent":["import {\r\n  ACCOUNT_ADD_REQUEST,\r\n  ACCOUNT_ADD_SUCCESS,\r\n  ACCOUNT_ADD_FAIL,\r\n  ACCOUNT_UPDATE_REQUEST,\r\n  ACCOUNT_UPDATE_SUCCESS,\r\n  ACCOUNT_UPDATE_FAIL,\r\n  USER_LOGIN_REQUEST,\r\n  USER_LOGIN_SUCCESS,\r\n  USER_LOGIN_FAIL,\r\n  USER_LOGOUT,\r\n  USER_REGISTER_REQUEST,\r\n  USER_REGISTER_SUCCESS,\r\n  USER_REGISTER_FAIL,\r\n  USER_UPDATE_PROFILE_REQUEST,\r\n  USER_UPDATE_PROFILE_SUCCESS,\r\n  USER_UPDATE_PROFILE_FAIL,\r\n  PAYPAL_PAYMENT_REQUEST,\r\n  PAYPAL_PAYMENT_SUCCESS,\r\n  PAYPAL_PAYMENT_FAIL,\r\n  PAYPAL_CANCEL_SUBSCRIPTION_REQUEST,\r\n  PAYPAL_CANCEL_SUBSCRIPTION_SUCCESS,\r\n  PAYPAL_CANCEL_SUBSCRIPTION_FAIL,\r\n} from \"../constants/userConstants\";\r\nimport axios from \"axios\";\r\n\r\nexport const login = (username, password) => async (dispatch) => {\r\n  try {\r\n    dispatch({\r\n      type: USER_LOGIN_REQUEST,\r\n    });\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    const { data } = await axios.post(\r\n      \"/api/login/\",\r\n      { username: username, password: password },\r\n      config\r\n    );\r\n    dispatch({\r\n      type: USER_LOGIN_SUCCESS,\r\n      payload: data,\r\n    });\r\n\r\n    localStorage.setItem(\"userInfo\", JSON.stringify(data)); // Store userInfo in localStorage\r\n  } catch (error) {\r\n    dispatch({\r\n      type: USER_LOGIN_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const logout = () => async (dispatch) => {\r\n  localStorage.removeItem(\"userInfo\");\r\n  dispatch({ type: USER_LOGOUT });\r\n};\r\n\r\nexport const registration =\r\n  (first_name, last_name, username, email, password) => async (dispatch) => {\r\n    try {\r\n      dispatch({\r\n        type: USER_REGISTER_REQUEST,\r\n      });\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.post(\r\n        \"/api/registration/\",\r\n        { first_name, last_name, username, email, password },\r\n        config\r\n      );\r\n      dispatch({\r\n        type: USER_REGISTER_SUCCESS,\r\n        payload: data,\r\n      });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: USER_REGISTER_FAIL,\r\n        payload:\r\n          error.response && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message,\r\n      });\r\n    }\r\n  };\r\n\r\nexport const updateUserSettings = (userData) => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({\r\n      type: USER_UPDATE_PROFILE_REQUEST,\r\n    });\r\n\r\n    const {\r\n      userLogin: { userInfo },\r\n    } = getState();\r\n\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${userInfo.token}`,\r\n      },\r\n    };\r\n\r\n    const { data } = await axios.patch(\"/api/user-settings/\", userData, config);\r\n\r\n    dispatch({\r\n      type: USER_UPDATE_PROFILE_SUCCESS,\r\n      payload: data,\r\n    });\r\n\r\n    // Optionally, update the userInfo in local storage and state\r\n    localStorage.setItem(\"userInfo\", JSON.stringify(data));\r\n    dispatch({\r\n      type: USER_LOGIN_SUCCESS,\r\n      payload: data,\r\n    });\r\n  } catch (error) {\r\n    const message =\r\n      error.response && error.response.status === 401\r\n        ? \"Old password is incorrect!\"\r\n        : error.response && error.response.data.message\r\n        ? error.response.data.message\r\n        : error.message;\r\n    dispatch({\r\n      type: USER_UPDATE_PROFILE_FAIL,\r\n      payload: message,\r\n    });\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}